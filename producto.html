<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Producto - Tavolo Casa</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos espec√≠ficos para la p√°gina de producto */
        .product-detail-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            background: white;
        }

        .product-detail-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            margin-bottom: 60px;
        }

        .product-images {
            position: relative;
        }

        .main-image {
            width: 100%;
            height: 400px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 16px;
            border: 2px dashed rgba(238, 36, 51, 0.2);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
        }

        .product-main-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 13px;
            display: block;
        }

        .image-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 16px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }

        .main-image:hover {
            border-color: rgba(238, 36, 51, 0.4);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .image-thumbnails {
            display: flex;
            gap: 12px;
        }

        .thumbnail {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 12px;
            cursor: pointer;
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            font-size: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .thumbnail:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(238, 36, 51, 0.2);
        }

        .thumbnail.active {
            border-color: #ee2433;
            background: linear-gradient(135deg, rgba(238, 36, 51, 0.1) 0%, rgba(208, 30, 42, 0.1) 100%);
            transform: translateY(-2px);
        }

        .product-info {
            display: flex;
            flex-direction: column;
        }

        .breadcrumb {
            margin-bottom: 20px;
            color: #666;
            font-size: 14px;
        }

        .breadcrumb a {
            color: #ee2433;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumb a:hover {
            color: #d01e2a;
        }

        .product-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stars {
            color: #ffa500;
        }

        .rating-text {
            color: #666;
            font-size: 14px;
        }

        .product-price-section {
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 15px;
            border: 1px solid rgba(238, 36, 51, 0.1);
        }

        .current-price {
            font-size: 2.2rem;
            font-weight: bold;
            color: #ee2433;
            margin-right: 15px;
        }

        .original-price {
            font-size: 1.5rem;
            color: #999;
            text-decoration: line-through;
            margin-right: 15px;
        }

        .discount-badge {
            background: linear-gradient(135deg, #ee2433 0%, #d01e2a 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(238, 36, 51, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Selector de variantes */
        .variant-selector {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            border: 1px solid rgba(238, 36, 51, 0.1);
        }

        .variant-selector h3 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .variant-group {
            margin-bottom: 20px;
        }

        .variant-group label {
            display: block;
            color: #666;
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .variant-select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .variant-select:focus {
            outline: none;
            border-color: #ee2433;
            box-shadow: 0 0 0 3px rgba(238, 36, 51, 0.1);
        }

        .variant-select:hover {
            border-color: #ee2433;
        }

        .product-description {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.6;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(248, 249, 250, 0.5);
            border-radius: 12px;
            border-left: 4px solid #ee2433;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 40px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #ee2433 0%, #d01e2a 100%);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            flex: 1;
            box-shadow: 0 6px 20px rgba(238, 36, 51, 0.3), inset 0 1px 0 rgba(255,255,255,0.2);
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 10px 30px rgba(238, 36, 51, 0.4), inset 0 1px 0 rgba(255,255,255,0.3);
        }

        .btn-primary:hover::before {
            transform: translateX(100%);
        }

        .btn-secondary {
            background: transparent;
            color: #ee2433;
            padding: 16px 32px;
            border: 2px solid #ee2433;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn-secondary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ee2433 0%, #d01e2a 100%);
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: -1;
        }

        .btn-secondary:hover {
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(238, 36, 51, 0.3);
        }

        .btn-secondary:hover::before {
            left: 0;
        }

        .product-details-tabs {
            border-top: 2px solid rgba(238, 36, 51, 0.1);
            padding-top: 40px;
        }

        .tab-buttons {
            display: flex;
            gap: 0;
            margin-bottom: 30px;
            border-bottom: 1px solid #eee;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 12px 12px 0 0;
            overflow: hidden;
        }

        .tab-button {
            background: none;
            border: none;
            padding: 18px 30px;
            font-size: 1rem;
            font-weight: 600;
            color: #666;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .tab-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(238, 36, 51, 0.1) 0%, rgba(208, 30, 42, 0.1) 100%);
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: -1;
        }

        .tab-button.active,
        .tab-button:hover {
            color: #ee2433;
            border-bottom-color: #ee2433;
            transform: translateY(-2px);
        }

        .tab-button.active::before,
        .tab-button:hover::before {
            left: 0;
        }

        .tab-content {
            display: none;
            padding: 30px;
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 0 0 12px 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .tab-content.active {
            display: block;
        }

        .features-list {
            list-style: none;
            padding: 0;
        }

        .features-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(238, 36, 51, 0.1);
            position: relative;
            padding-left: 35px;
            transition: all 0.3s ease;
        }

        .features-list li:hover {
            background: rgba(238, 36, 51, 0.05);
            padding-left: 40px;
        }

        .features-list li:before {
            content: "‚úì";
            color: #ee2433;
            font-weight: bold;
            position: absolute;
            left: 0;
            top: 12px;
            width: 25px;
            height: 25px;
            background: rgba(238, 36, 51, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        .specifications-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .spec-item {
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(238, 36, 51, 0.1);
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .spec-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(238, 36, 51, 0.15);
            border-color: rgba(238, 36, 51, 0.2);
        }

        .spec-label {
            font-weight: bold;
            color: #ee2433;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .spec-value {
            color: #555;
            font-size: 1rem;
        }

        .back-button {
            background: linear-gradient(135deg, #6c757d 0%, #5a6268 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
            position: relative;
            overflow: hidden;
        }

        .back-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .back-button:hover {
            background: linear-gradient(135deg, #5a6268 0%, #495057 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.4);
        }

        .back-button:hover::before {
            transform: translateX(100%);
        }

        .loading {
            text-align: center;
            padding: 100px 20px;
            color: #666;
        }

        .error {
            text-align: center;
            padding: 100px 20px;
            color: #ee2433;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .product-detail-container {
                padding: 20px 10px;
            }
            
            .product-detail-content {
                grid-template-columns: 1fr;
                gap: 25px;
            }
            
            .main-image {
                height: 300px;
                margin-bottom: 15px;
            }
            
            .image-thumbnails {
                gap: 8px;
                justify-content: center;
            }
            
            .thumbnail {
                width: 60px;
                height: 60px;
            }
            
            .product-title {
                font-size: 1.6rem;
                margin-bottom: 12px;
            }
            
            .current-price {
                font-size: 1.8rem;
            }
            
            .original-price {
                font-size: 1.2rem;
            }
            
            .product-description {
                font-size: 0.8rem;
                padding: 15px;
                margin-bottom: 25px;
                line-height: 1.4;
                min-height: 120px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 12px;
                margin-bottom: 30px;
            }
            
            .btn-primary,
            .btn-secondary {
                padding: 14px 24px;
                font-size: 1rem;
            }
            
            .tab-buttons {
                flex-wrap: wrap;
                gap: 0;
            }
            
            .tab-button {
                flex: 1;
                min-width: 120px;
                padding: 14px 16px;
                font-size: 0.9rem;
            }
            
            .tab-content {
                padding: 18px;
                min-height: 200px;
            }
            
            .tab-content h3 {
                font-size: 1.1rem;
                margin-bottom: 10px;
            }
            
            .features-list li {
                font-size: 0.75rem;
                line-height: 1.3;
                padding: 8px 0;
                padding-left: 28px;
            }
            
            .spec-label {
                font-size: 0.8rem;
                margin-bottom: 5px;
            }
            
            .spec-value {
                font-size: 0.75rem;
                line-height: 1.3;
            }
            
            .specifications-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .spec-item {
                padding: 15px;
            }
            
            .back-button {
                padding: 10px 20px;
                font-size: 0.9rem;
                margin-bottom: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .product-detail-container {
                padding: 15px 8px;
            }
            
            .main-image {
                height: 250px;
                border-radius: 12px;
                margin-bottom: 12px;
            }
            
            .thumbnail {
                width: 50px;
                height: 50px;
                border-radius: 8px;
            }
            
            .image-thumbnails {
                gap: 6px;
                overflow-x: auto;
                padding: 5px 0;
            }
            
            .breadcrumb {
                font-size: 12px;
                margin-bottom: 15px;
            }
            
            .product-title {
                font-size: 1.4rem;
                line-height: 1.3;
                margin-bottom: 10px;
            }
            
            .product-price-section {
                padding: 15px;
                margin-bottom: 20px;
                border-radius: 12px;
            }
            
            .current-price {
                font-size: 1.6rem;
            }
            
            .original-price {
                font-size: 1.1rem;
            }
            
            .discount-badge {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .product-description {
                font-size: 0.7rem;
                padding: 12px;
                margin-bottom: 18px;
                line-height: 1.3;
                min-height: 100px;
            }
            
            .action-buttons {
                gap: 10px;
                margin-bottom: 25px;
            }
            
            .btn-primary,
            .btn-secondary {
                padding: 12px 20px;
                font-size: 0.95rem;
                border-radius: 25px;
            }
            
            .tab-buttons {
                margin-bottom: 20px;
                border-radius: 10px 10px 0 0;
            }
            
            .tab-button {
                padding: 12px 10px;
                font-size: 0.85rem;
                min-width: 80px;
            }
            
            .tab-content {
                padding: 10px;
                border-radius: 0 0 10px 10px;
                min-height: 160px;
            }
            
            .tab-content h3 {
                font-size: 0.9rem;
                margin-bottom: 8px;
            }
            
            .features-list li {
                padding: 5px 0;
                padding-left: 22px;
                font-size: 0.65rem;
                line-height: 1.2;
            }
            
            .features-list li:before {
                width: 16px;
                height: 16px;
                font-size: 9px;
                top: 5px;
            }
            
            .spec-item {
                padding: 10px;
                border-radius: 10px;
                min-height: 70px;
            }
            
            .spec-label {
                font-size: 0.7rem;
                margin-bottom: 3px;
            }
            
            .spec-value {
                font-size: 0.65rem;
                line-height: 1.2;
            }
            
            .back-button {
                padding: 8px 16px;
                font-size: 0.85rem;
                margin-bottom: 15px;
                border-radius: 20px;
            }
            
            /* Mejorar espaciado en m√≥vil peque√±o */
            .product-detail-content {
                gap: 20px;
            }
            
            .product-details-tabs {
                padding-top: 30px;
            }
            
            /* Optimizar rating en m√≥vil */
            .product-rating {
                margin-bottom: 15px;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .rating-text {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Header principal (mismo que index) -->
    <header class="main-header">
        <div class="container">
            <div class="header-content">
                <button class="hamburger-menu" onclick="toggleMobileMenu()">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
                
                <div class="logo">
                    <a href="index.html"><img src="logoTavolo.png" alt="Tavolo Casa"></a>
                </div>
                
                <div class="header-contact">
                    <a href="tel:+34636215696" class="contact-btn">
                        <i class="fas fa-phone"></i>
                        <span>636 215 696</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Men√∫ lateral (mismo que index) -->
    <div class="side-menu" id="side-menu">
        <div class="side-menu-overlay" onclick="closeSideMenu()"></div>
        <div class="side-menu-content">
            <div class="side-menu-header">
                <img src="logoTavolo.png" alt="Tavolo Casa" class="side-menu-logo">
                <button class="close-menu-btn" onclick="closeSideMenu()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <nav class="side-menu-nav">
                <ul class="side-menu-list">
                    <li><a href="sobre-nosotros.html"><i class="fas fa-info-circle"></i> Sobre nosotros</a></li>
                    <li class="has-submenu">
                        <a href="#" onclick="toggleSideSubmenu(event)"><i class="fas fa-th-large"></i> Productos <i class="fas fa-chevron-right submenu-arrow"></i></a>
                        <ul class="side-submenu">
                            <li><a href="index.html#almohadas"><i class="fas fa-bed"></i> Almohadas</a></li>
                            <li><a href="index.html#cojines"><i class="fas fa-couch"></i> Cojines</a></li>
                            <li><a href="index.html#edredones"><i class="fas fa-blanket"></i> Edredones</a></li>
                            <li><a href="index.html#relleno"><i class="fas fa-fill"></i> Relleno Almohada/coj√≠n</a></li>
                            <li><a href="index.html#mascotas"><i class="fas fa-paw"></i> Art√≠culos mascotas</a></li>
                            <li><a href="index.html#peluches"><i class="fas fa-teddy-bear"></i> Peluches</a></li>
                        </ul>
                    </li>
                    <li><a href="index.html#contact"><i class="fas fa-envelope"></i> Contacto</a></li>
                </ul>
            </nav>
            
            <div class="side-menu-footer">
                <div class="side-contact">
                    <div class="side-contact-item">
                        <i class="fas fa-phone"></i>
                        <span>636 215 696</span>
                    </div>
                    <div class="side-contact-item">
                        <i class="fas fa-envelope"></i>
                        <span>tavolocasainfo@gmail.com</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Contenido principal del producto -->
    <main class="product-detail-container">
        <!-- Loading state -->
        <div id="loading" class="loading">
            <i class="fas fa-spinner fa-spin" style="font-size: 2rem; margin-bottom: 20px;"></i>
            <p>Cargando producto...</p>
        </div>

        <!-- Error state -->
        <div id="error" class="error" style="display: none;">
            <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 20px;"></i>
            <p>No se pudo cargar el producto.</p>
            <a href="index.html" class="btn-primary" style="display: inline-block; margin-top: 20px;">Volver al cat√°logo</a>
        </div>

        <!-- Product content -->
        <div id="product-content" style="display: none;">
            <!-- Bot√≥n volver -->
            <a href="index.html" class="back-button">
                <i class="fas fa-arrow-left"></i>
                Volver al cat√°logo
            </a>

            <!-- Breadcrumb -->
            <div class="breadcrumb">
                <a href="index.html">Inicio</a> > 
                <span id="category-breadcrumb">Productos</span> > 
                <span id="product-breadcrumb">Producto</span>
            </div>

            <!-- Contenido principal del producto -->
            <div class="product-detail-content">
                <!-- Im√°genes del producto -->
                <div class="product-images">
                    <div class="main-image" id="main-image">
                        Imagen principal del producto
                    </div>
                    <div class="image-thumbnails" id="image-thumbnails">
                        <!-- Thumbnails se generar√°n con JS -->
                    </div>
                </div>

                <!-- Informaci√≥n del producto -->
                <div class="product-info">
                    <h1 class="product-title" id="product-title">Cargando...</h1>
                    
                    <div class="product-rating" id="product-rating">
                        <!-- Rating se generar√° con JS -->
                    </div>

                    <div class="product-price-section">
                        <span class="current-price" id="current-price">--</span>
                        <span class="original-price" id="original-price">--</span>
                        <span class="discount-badge" id="discount-badge">--</span>
                    </div>

                    <!-- Selector de variantes -->
                    <div class="variant-selector">
                        <!-- Se generar√° din√°micamente con JavaScript -->
                    </div>

                    <div class="product-description" id="product-description">
                        Cargando descripci√≥n...
                    </div>

                    <div class="action-buttons">
                        <button class="btn-primary" onclick="contactarProducto()">
                            <i class="fas fa-phone"></i>
                            Contactar para pedido
                        </button>
                        <button class="btn-secondary" onclick="compartirProducto()">
                            <i class="fas fa-share"></i>
                            Compartir
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tabs con informaci√≥n detallada -->
            <div class="product-details-tabs">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="caracteristicas">Caracter√≠sticas</button>
                    <button class="tab-button" data-tab="especificaciones">Especificaciones</button>
                    <button class="tab-button" data-tab="beneficios">Beneficios</button>
                    <button class="tab-button" data-tab="cuidados">Cuidados</button>
                </div>

                <div class="tab-content active" id="tab-caracteristicas">
                    <h3>Caracter√≠sticas principales</h3>
                    <!-- Se generar√° con JS -->
                </div>

                <div class="tab-content" id="tab-especificaciones">
                    <h3>Especificaciones t√©cnicas</h3>
                    <!-- Se generar√° con JS -->
                </div>

                <div class="tab-content" id="tab-beneficios">
                    <h3>Beneficios</h3>
                    <!-- Se generar√° con JS -->
                </div>

                <div class="tab-content" id="tab-cuidados">
                    <h3>Instrucciones de cuidado</h3>
                    <!-- Se generar√° con JS -->
                </div>
            </div>
        </div>
    </main>

    <!-- Footer (mismo que index) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="footer-logo">
                        <img src="logoTavolo.png" alt="Tavolo Casa">
                    </div>
                    <p class="footer-description">
                        Tavolo somos la tienda del confort, el objetivo es proveer a nuestros clientes y mascotas de los mejores
                    </p>
                </div>
                
                <div class="footer-center">
                    <h3>Categor√≠as</h3>
                    <ul class="footer-categories">
                        <li><a href="index.html#cojines">Cojines</a></li>
                        <li><a href="index.html#almohadas">Almohadas</a></li>
                        <li><a href="index.html#edredones">Edredones</a></li>
                    </ul>
                </div>
                
                <div class="footer-right">
                    <h3>Tavolo Casa</h3>
                    <div class="footer-contact">
                        <div class="footer-address">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Calle Torrente 4, 28942, Fuenlabrada, Madrid.</span>
                        </div>
                        <div class="footer-phone">
                            <i class="fas fa-phone"></i>
                            <span>636 215 696</span>
                        </div>
                        <div class="footer-email">
                            <i class="fas fa-envelope"></i>
                            <span>tavolocasainfo@gmail.com</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="image-loader.js"></script>
    <!-- Scripts del sistema simple de variantes -->
    <script>
        // Variables globales para el sistema de variantes integrado
        let productosOriginales = {};
        let productosAgrupados = {};
        let productoActual = null;
        let varianteActual = null;
        
        // Incluir las funciones del sistema simple de agrupaci√≥n
        // Cargar productos del JSON original
        async function cargarProductos() {
            try {
                const response = await fetch('./productos.json');
                const data = await response.json();
                productosOriginales = data;
                
                // Agrupar productos autom√°ticamente
                agruparProductos();
                
                console.log('‚úÖ Productos cargados y agrupados:', productosAgrupados);
                return true;
            } catch (error) {
                console.error('‚ùå Error cargando productos:', error);
                return false;
            }
        }
        
        // Funci√≥n simple para agrupar productos por nombre base
        function agruparProductos() {
            productosAgrupados = {};
            
            Object.keys(productosOriginales).forEach(categoria => {
                productosOriginales[categoria].forEach(producto => {
                    // Para cojines, usar agrupaci√≥n por color; para otros, agrupaci√≥n est√°ndar
                    const nombreBase = producto.category === 'cojines' 
                        ? extraerNombreBaseCojin(producto.name)
                        : extraerNombreBase(producto.name);
                    
                    if (!productosAgrupados[nombreBase]) {
                        productosAgrupados[nombreBase] = {
                            id: crearId(nombreBase),
                            nombreBase: nombreBase,
                            categoria: producto.category,
                            descripcion: producto.description,
                            descripcionDetallada: producto.detailed_description,
                            caracteristicas: producto.features || [],
                            beneficios: producto.benefits || [],
                            cuidados: producto.care_instructions || [],
                            variantes: []
                        };
                    }
                    
                    // Agregar como variante
                    productosAgrupados[nombreBase].variantes.push({
                        id: producto.id,
                        nombre: producto.name,
                        precio: producto.price,
                        precioOriginal: producto.originalPrice,
                        descuento: producto.discount,
                        tama√±o: extraerTama√±o(producto.name),
                        color: extraerColor(producto.name),
                        imagen: producto.images?.[0] || '',
                        rating: producto.rating || 0,
                        reviews: producto.reviews || 0,
                        especificaciones: producto.specifications || {}
                    });
                });
            });
        }
        
        // Funciones auxiliares para extraer informaci√≥n
        function extraerNombreBase(nombre) {
            return nombre
                .replace(/\s*\d+CM\s*$/i, '')
                .replace(/\s*\d+X\d+CM\s*$/i, '')
                .replace(/\s*(AZUL|GRIS|MARR√ìN|ROSA|VERDE|ROJO|NEGRO|BLANCO)\s*$/i, '')
                .replace(/\s*(CLARO|OSCURO)\s*$/i, '')
                .replace(/\s*(ESTAMPADO.*)\s*$/i, '')
                .trim();
        }
        
        // Funci√≥n especial para agrupar cojines por color (maneja todas las l√≠neas de productos)
        function extraerNombreBaseCojin(nombre) {
            // Para cojines, mantener el color en el nombre base y remover solo las medidas
            // Esta funci√≥n maneja diferentes l√≠neas de productos autom√°ticamente:
            // - "COJ√çN DECORATIVO NUEVO MODELO 45X45CM - AZUL CLARO"
            // - "(RELLENO) COJ√çN DECORATIVO CHENILLA 40*40cm - GRIS CLARO"
            // - Cualquier otra l√≠nea de productos de cojines
            
            let nombreBase = nombre;
            
            // Remover medidas en diferentes formatos:
            // - 45X45CM, 40X40CM, etc.
            // - 45*45cm, 40*40cm, etc. 
            // - 35x50cm, etc.
            nombreBase = nombreBase
                .replace(/\s*\d+[X*x]\d+[Cc][Mm]\s*/g, ' ')
                .replace(/\s*\d+[Cc][Mm]\s*/g, ' ');
            
            // Limpiar espacios m√∫ltiples y normalizar guiones
            nombreBase = nombreBase
                .replace(/\s*-\s*/g, ' - ')
                .replace(/\s+/g, ' ')
                .trim();
            
            return nombreBase;
        }
        
        function extraerTama√±o(nombre) {
            // Buscar medidas en diferentes formatos: 45X45CM, 40*40cm, 35x50cm, etc.
            const matchTama√±o = nombre.match(/(\d+[X*x]\d+[Cc][Mm]|\d+[Cc][Mm])/i);
            return matchTama√±o ? matchTama√±o[1].toUpperCase() : '';
        }
        
        function extraerColor(nombre) {
            const matchColor = nombre.match(/(AZUL|GRIS|MARR√ìN|ROSA|VERDE|ROJO|NEGRO|BLANCO|CLARO|OSCURO|ESTAMPADO.*)/i);
            return matchColor ? matchColor[1] : '';
        }
        
        function crearId(texto) {
            return texto
                .toLowerCase()
                .replace(/[√°√†√¢√£]/g, 'a')
                .replace(/[√©√®√™]/g, 'e')
                .replace(/[√≠√¨√Æ]/g, 'i')
                .replace(/[√≥√≤√¥]/g, 'o')
                .replace(/[√∫√π√ª]/g, 'u')
                .replace(/√±/g, 'n')
                .replace(/[^a-z0-9\s]/g, '')
                .replace(/\s+/g, '-')
                .replace(/-+/g, '-')
                .replace(/^-+|-+$/g, '');
        }
        
        // Funci√≥n para obtener producto agrupado por ID
        function obtenerProductoAgrupado(id) {
            for (const nombreBase in productosAgrupados) {
                const producto = productosAgrupados[nombreBase];
                if (producto.id === id) {
                    return producto;
                }
            }
            return null;
        }
    </script>
    
    <script>
        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', async function() {
            await inicializarPaginaProducto();
        });

        async function inicializarPaginaProducto() {
            console.log('üîç Iniciando carga de p√°gina de producto...');
            
            // Obtener ID del producto desde la URL
            const urlParams = new URLSearchParams(window.location.search);
            const productId = urlParams.get('id');
            
            if (!productId) {
                mostrarError('No se especific√≥ un producto para mostrar');
                return;
            }
            
            console.log('üéØ ID del producto:', productId);
            
            try {
                // Cargar y agrupar productos
                await cargarProductos();
                
                // Buscar el producto agrupado
                const producto = obtenerProductoAgrupado(productId);
                
                if (!producto) {
                    mostrarError('Producto no encontrado');
                    return;
                }
                
                console.log('‚úÖ Producto encontrado:', producto);
                
                productoActual = producto;
                varianteActual = producto.variantes[0]; // Primera variante por defecto
                
                // Mostrar el producto
                mostrarProducto();
                
            } catch (error) {
                console.error('‚ùå Error:', error);
                mostrarError('Error cargando el producto');
            }
        }

        function mostrarProducto() {
            // Actualizar informaci√≥n b√°sica
            actualizarInfoBasica();
            
            // Mostrar selector de variantes si hay m√°s de una
            if (productoActual.variantes.length > 1) {
                mostrarSelectorVariantes();
            }
            
            // Actualizar contenido seg√∫n la variante actual
            actualizarContenidoVariante();
            
            // Configurar pesta√±as
            configurarPestanas();
            
            // Ocultar loading y mostrar contenido
            document.getElementById('loading').style.display = 'none';
            document.getElementById('product-content').style.display = 'block';
        }

        function actualizarInfoBasica() {
            // T√≠tulo
            const titulo = document.getElementById('product-title');
            if (titulo) titulo.textContent = productoActual.nombreBase;
            
            // Breadcrumb
            const categoryBreadcrumb = document.getElementById('category-breadcrumb');
            const productBreadcrumb = document.getElementById('product-breadcrumb');
            
            if (categoryBreadcrumb) {
                categoryBreadcrumb.textContent = productoActual.categoria.charAt(0).toUpperCase() + productoActual.categoria.slice(1);
            }
            
            if (productBreadcrumb) {
                productBreadcrumb.textContent = productoActual.nombreBase;
            }
            
            // Descripci√≥n
            const descripcion = document.getElementById('product-description');
            if (descripcion) {
                descripcion.textContent = productoActual.descripcionDetallada || productoActual.descripcion;
            }
            
            // T√≠tulo de la p√°gina
            document.title = `${productoActual.nombreBase} - Tavolo Casa`;
        }

        function mostrarSelectorVariantes() {
            const container = document.querySelector('.variant-selector');
            if (!container) return;
            
            // Determinar qu√© atributos tienen las variantes (tama√±o, color, etc.)
            const atributos = determinarAtributosVariantes();
            
            let html = '<h3>Elige tu opci√≥n:</h3>';
            
            // Crear selector para cada atributo que tenga m√∫ltiples valores
            Object.keys(atributos).forEach(atributo => {
                const valores = atributos[atributo];
                if (valores.length > 1) {
                    html += `
                        <div class="variant-group">
                            <label>${atributo.charAt(0).toUpperCase() + atributo.slice(1)}:</label>
                            <select class="variant-select" data-atributo="${atributo}">
                                ${valores.map(valor => `
                                    <option value="${valor}" ${valor === varianteActual[atributo] ? 'selected' : ''}>
                                        ${valor}
                                    </option>
                                `).join('')}
                            </select>
                        </div>
                    `;
                }
            });
            
            container.innerHTML = html;
            
            // Configurar event listeners
            container.querySelectorAll('.variant-select').forEach(select => {
                select.addEventListener('change', cambiarVariante);
            });
        }

        function determinarAtributosVariantes() {
            const atributos = {};
            
            productoActual.variantes.forEach(variante => {
                if (variante.tama√±o && variante.tama√±o.trim()) {
                    if (!atributos.tama√±o) atributos.tama√±o = [];
                    if (!atributos.tama√±o.includes(variante.tama√±o)) {
                        atributos.tama√±o.push(variante.tama√±o);
                    }
                }
                
                if (variante.color && variante.color.trim()) {
                    if (!atributos.color) atributos.color = [];
                    if (!atributos.color.includes(variante.color)) {
                        atributos.color.push(variante.color);
                    }
                }
            });
            
            return atributos;
        }

        function cambiarVariante() {
            const selectors = document.querySelectorAll('.variant-select');
            const atributosSeleccionados = {};
            
            selectors.forEach(select => {
                const atributo = select.getAttribute('data-atributo');
                atributosSeleccionados[atributo] = select.value;
            });
            
            // Buscar variante que coincida
            const varianteEncontrada = productoActual.variantes.find(variante => {
                return Object.keys(atributosSeleccionados).every(attr => {
                    return variante[attr] === atributosSeleccionados[attr];
                });
            });
            
            if (varianteEncontrada) {
                varianteActual = varianteEncontrada;
                actualizarContenidoVariante();
            }
        }

        function actualizarContenidoVariante() {
            // Actualizar precio
            const precio = document.getElementById('current-price');
            const precioOriginal = document.getElementById('original-price');
            const descuento = document.getElementById('discount-badge');
            
            if (precio) precio.textContent = varianteActual.precio;
            if (precioOriginal) precioOriginal.textContent = varianteActual.precioOriginal;
            if (descuento) descuento.textContent = varianteActual.descuento;
            
            // Actualizar imagen
            actualizarImagen();
            
            // Actualizar rating si existe
            const rating = document.getElementById('product-rating');
            if (rating && varianteActual.rating > 0) {
                rating.innerHTML = `
                    <div class="stars">${generarEstrellas(varianteActual.rating)}</div>
                    <span class="rating-text">${varianteActual.rating}/5 (${varianteActual.reviews} opiniones)</span>
                `;
            }
        }

        function actualizarImagen() {
            const container = document.getElementById('main-image');
            if (!container) return;
            
            const imagenSrc = varianteActual.imagen;
            if (imagenSrc) {
                const img = new Image();
                img.onload = function() {
                    container.innerHTML = `<img src="${imagenSrc}.jpg" alt="${varianteActual.nombre}" class="product-main-image">`;
                };
                img.onerror = function() {
                    // Intentar con .jpeg
                    const imgJpeg = new Image();
                    imgJpeg.onload = function() {
                        container.innerHTML = `<img src="${imagenSrc}.jpeg" alt="${varianteActual.nombre}" class="product-main-image">`;
                    };
                    imgJpeg.onerror = function() {
                        container.innerHTML = '<div class="image-placeholder">Imagen no disponible</div>';
                    };
                    imgJpeg.src = `${imagenSrc}.jpeg`;
                };
                img.src = `${imagenSrc}.jpg`;
            } else {
                container.innerHTML = '<div class="image-placeholder">Imagen no disponible</div>';
            }
        }

        function generarEstrellas(rating) {
            const estrellasLlenas = Math.floor(rating);
            const mediaEstrella = rating % 1 !== 0;
            const estrellasVacias = 5 - estrellasLlenas - (mediaEstrella ? 1 : 0);
            
            let html = '';
            
            // Estrellas llenas
            for (let i = 0; i < estrellasLlenas; i++) {
                html += '<i class="fas fa-star"></i>';
            }
            
            // Media estrella
            if (mediaEstrella) {
                html += '<i class="fas fa-star-half-alt"></i>';
            }
            
            // Estrellas vac√≠as
            for (let i = 0; i < estrellasVacias; i++) {
                html += '<i class="far fa-star"></i>';
            }
            
            return html;
        }

        function configurarPestanas() {
            // Llenar contenido de pesta√±as
            llenarPestana('caracteristicas', productoActual.caracteristicas);
            llenarPestana('beneficios', productoActual.beneficios);
            llenarPestana('cuidados', productoActual.cuidados);
            llenarPestana('especificaciones', Object.entries(varianteActual.especificaciones || {}));
            
            // Configurar navegaci√≥n de pesta√±as
            const botonesPestanas = document.querySelectorAll('.tab-button');
            const contenidoPestanas = document.querySelectorAll('.tab-content');
            
            botonesPestanas.forEach(boton => {
                boton.addEventListener('click', function() {
                    const pestanaTarget = this.getAttribute('data-tab');
                    
                    // Quitar clase activa de todas
                    botonesPestanas.forEach(b => b.classList.remove('active'));
                    contenidoPestanas.forEach(c => c.classList.remove('active'));
                    
                    // Activar la seleccionada
                    this.classList.add('active');
                    document.getElementById(`tab-${pestanaTarget}`).classList.add('active');
                });
            });
        }

        function llenarPestana(pestana, contenido) {
            const elemento = document.getElementById(`tab-${pestana}`);
            if (!elemento) return;
            
            if (Array.isArray(contenido)) {
                if (contenido.length > 0) {
                    elemento.innerHTML = `<ul class="features-list">${contenido.map(item => `<li>${item}</li>`).join('')}</ul>`;
                } else {
                    elemento.innerHTML = '<p>Informaci√≥n no disponible</p>';
                }
            } else if (pestana === 'especificaciones') {
                if (contenido.length > 0) {
                    elemento.innerHTML = `<div class="specifications-grid">${contenido.map(([key, value]) => {
                        const etiqueta = formatearEtiquetaEspec(key);
                        return `<div class="spec-item"><div class="spec-label">${etiqueta}</div><div class="spec-value">${value}</div></div>`;
                    }).join('')}</div>`;
                } else {
                    elemento.innerHTML = '<p>Especificaciones no disponibles</p>';
                }
            } else {
                elemento.innerHTML = '<p>Informaci√≥n no disponible</p>';
            }
        }

        function formatearEtiquetaEspec(key) {
            const etiquetas = {
                'dimensions': 'Dimensiones',
                'material': 'Material',
                'weight': 'Peso',
                'cover': 'Funda',
                'firmness': 'Firmeza',
                'warranty': 'Garant√≠a'
            };
            return etiquetas[key] || key.charAt(0).toUpperCase() + key.slice(1);
        }

        function mostrarError(mensaje) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('product-content').innerHTML = `
                <div style="text-align: center; padding: 50px;">
                    <h2>‚ö†Ô∏è Error</h2>
                    <p>${mensaje}</p>
                    <a href="index.html" class="btn-primary" style="display: inline-block; margin-top: 20px;">Volver al cat√°logo</a>
                </div>
            `;
            document.getElementById('product-content').style.display = 'block';
        }

        // Funciones para botones de acci√≥n
        function contactarProducto() {
            if (!productoActual || !varianteActual) return;
            
            const mensaje = `Hola, me interesa el producto: ${varianteActual.nombre} (${varianteActual.precio})`;
            const whatsappUrl = `https://wa.me/34636215696?text=${encodeURIComponent(mensaje)}`;
            window.open(whatsappUrl, '_blank');
        }

        function compartirProducto() {
            if (navigator.share) {
                navigator.share({
                    title: productoActual.nombreBase,
                    text: `${productoActual.nombreBase} - Tavolo Casa`,
                    url: window.location.href
                }).catch(console.error);
            } else {
                // Copiar enlace al portapapeles
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('¬°Enlace copiado al portapapeles!');
                }).catch(() => {
                    prompt('Copia este enlace:', window.location.href);
                });
            }
        }
    </script>
</body>
</html>
